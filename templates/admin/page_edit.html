{% extends "admin/base.html" %}
{% block title %}Edit {{ page_info.title }}{% endblock %}
{% block content %}
<div class="content-header">
<div>
<a href="{{ url_for('admin_pages') }}" style="color:var(--text-light);text-decoration:none;font-size:13px;display:inline-flex;align-items:center;gap:4px;margin-bottom:8px"><i class="fas fa-arrow-left"></i> Back to Site Pages</a>
<h1>{{ page_info.icon }} Edit {{ page_info.title }}</h1>
<p style="color:var(--text-light);margin-top:4px">Customize the content shown on the <a href="{{ url_for(page_info.url_endpoint) }}" target="_blank" style="color:var(--primary)">{{ page_info.title }}</a> page.</p>
</div>
</div>

<form method="POST" enctype="multipart/form-data">
<div style="display:grid;grid-template-columns:1fr 320px;gap:24px;align-items:start">

<!-- Main Content -->
<div class="card" style="padding:24px">
<div class="form-group">
<label>Page Content</label>
<p style="font-size:12px;color:var(--text-light);margin-bottom:12px">Use the rich text editor below to write and format your page content. You can add headings, bold text, links, images, and more.</p>
<input type="hidden" name="content" id="page_content" value="{{ content }}">
<div class="rich-editor" data-target="page_content" style="min-height:400px"></div>
</div>
</div>

<!-- Sidebar -->
<div>
<div class="card" style="padding:20px;margin-bottom:16px">
<h3 style="font-size:14px;font-weight:700;margin-bottom:14px">Featured Image</h3>
<input type="hidden" name="existing_featured_image" value="{{ featured_image }}">
{% if featured_image %}
<div style="margin-bottom:12px;border-radius:10px;overflow:hidden">
<img src="/static/uploads/{{ featured_image }}" style="width:100%;display:block" alt="Featured image">
</div>
<p style="font-size:11px;color:var(--text-light);margin-bottom:10px">Current: {{ featured_image }}</p>
{% endif %}
<input type="file" name="featured_image" accept="image/*" class="form-control" style="font-size:13px">
<p style="font-size:11px;color:var(--text-light);margin-top:6px">Upload an optional featured image for this page.</p>
</div>

<div class="card" style="padding:20px;margin-bottom:16px">
<h3 style="font-size:14px;font-weight:700;margin-bottom:10px">Actions</h3>
<button type="submit" class="btn btn-primary" style="width:100%;justify-content:center;margin-bottom:8px">
<i class="fas fa-save"></i> Save Changes
</button>
<a href="{{ url_for(page_info.url_endpoint) }}" target="_blank" class="btn btn-secondary" style="width:100%;justify-content:center">
<i class="fas fa-external-link-alt"></i> Preview Page
</a>
</div>

<div class="card" style="padding:16px;background:#fef9f3;border:1px dashed var(--border)">
<p style="font-size:12px;color:var(--text-light);margin:0"><strong>ðŸ’¡ Note:</strong> If you leave the content empty and save, the page will use the default built-in template content.</p>
</div>
</div>
</div>
</form>

<style>
.rich-editor .ql-editor { min-height: 350px; font-size: 15px; line-height: 1.7; }
@media(max-width:768px) {
  form > div { grid-template-columns: 1fr !important; }
}
</style>
{% endblock %}
