{% extends "admin/base.html" %}
{% block title %}{{ 'Edit' if editing else 'New' }} Module{% endblock %}
{% block page_title %}{{ 'Edit' if editing else 'Create' }} Module{% endblock %}

{% block admin_content %}
<form method="POST" class="admin-card" style="max-width:700px">
<div class="admin-card-body">
<div class="form-group">
<label>Module Name *</label>
<input name="name" class="form-control" value="{{ module.name if editing else '' }}" required placeholder="e.g. Sacred Stories, Festivals, Bhajans...">
</div>
<div class="form-row">
<div class="form-group">
<label>Icon (emoji)</label>
<input name="icon" class="form-control" value="{{ module.icon if editing else 'ðŸ“' }}" placeholder="ðŸ“" style="font-size:24px;text-align:center;width:100px">
</div>
<div class="form-group">
<label>Sort Order</label>
<input name="sort_order" class="form-control" type="number" value="{{ module.sort_order if editing else 0 }}">
</div>
</div>
<div class="form-group">
<label>Description</label>
<textarea name="description" class="form-control" rows="3">{{ module.description if editing else '' }}</textarea>
</div>
<div class="form-group">
<label>Custom Fields Schema (JSON)</label>
<textarea name="fields_schema" class="form-control" rows="4" placeholder='[{"name":"duration","type":"text","label":"Duration"}]'>{{ module.fields_schema if editing else '[]' }}</textarea>
<div class="hint">Define custom fields as JSON array. Each field: {"name":"...", "type":"text|textarea|number|select", "label":"..."}</div>
</div>
{% if editing %}
<div class="form-group">
<label class="form-check"><input type="checkbox" name="is_active" {{ 'checked' if module.is_active }}> Module is Active</label>
</div>
{% endif %}
</div>
<div style="padding:16px 24px;border-top:1px solid var(--border);display:flex;gap:12px;justify-content:flex-end">
<a href="{{ url_for('admin_modules') }}" class="btn btn-secondary">Cancel</a>
<button type="submit" class="btn btn-primary"><i class="fas fa-save"></i> {{ 'Update' if editing else 'Create' }} Module</button>
</div>
</form>
{% endblock %}
