<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>{% block title %}Holy Dham{% endblock %} ‚Äì Sacred India</title>
<meta name="description" content="{% block meta_desc %}Discover India's most sacred dhams, temples, spiritual stories, and devotional content.{% endblock %}">
<link rel="manifest" href="/static/manifest.json">
<meta name="theme-color" content="#C76B8F">
<link href="https://fonts.googleapis.com/css2?family=Josefin+Sans:wght@300;400;500;600;700&family=Nunito+Sans:ital,wght@0,300;0,400;0,500;0,600;1,300;1,400&family=Plus+Jakarta+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<style>
*{margin:0;padding:0;box-sizing:border-box}
:root{
--rose:#E8A0BF;--rose-deep:#C76B8F;--rose-pale:#F8E5EE;--rose-dark:#A04870;
--cream:#FDF8F3;--cream-dark:#F5ECE2;--cream-deep:#EAD9C6;
--saffron:#E89B4F;--sage:#8BAB8A;--sage-light:#D4E5D4;
--text-dark:#2D1F2E;--text-mid:#5A4A5B;--text-light:#8A7A8B;
--temple-gold:#C8A44E;--border:#E8DDD0;
--white:#FFFFFF;--shadow:rgba(45,31,46,.06);
}
html{scroll-behavior:smooth}
body{font-family:'Nunito Sans',sans-serif;background:var(--cream);color:var(--text-dark);overflow-x:hidden;line-height:1.6}
::selection{background:var(--rose);color:white}
a{color:var(--rose-deep);text-decoration:none;transition:color .3s}
a:hover{color:var(--rose-dark)}
img{max-width:100%;height:auto}

/* ‚îÄ‚îÄ‚îÄ Header ‚îÄ‚îÄ‚îÄ */
header{position:fixed;top:0;left:0;right:0;z-index:100;transition:all .4s}
header.scrolled{background:rgba(253,248,243,.96);backdrop-filter:blur(20px);box-shadow:0 2px 40px var(--shadow)}
.header-inner{max-width:1300px;margin:0 auto;padding:16px 40px;display:flex;align-items:center;justify-content:space-between}
.logo{display:flex;align-items:center;gap:10px;text-decoration:none}
.logo-flower{font-size:28px}
.logo-text{font-family:'Josefin Sans',sans-serif;font-size:24px;color:var(--text-dark);font-weight:700}
.logo-text span{color:var(--rose-deep)}
nav{display:flex;align-items:center;gap:6px}
nav a{color:var(--text-mid);font-family:'Plus Jakarta Sans',sans-serif;font-size:14px;font-weight:500;padding:8px 14px;border-radius:8px;transition:all .2s}
nav a:hover,nav a.active{color:var(--rose-deep);background:var(--rose-pale)}
.nav-search{width:40px;height:40px;border:1px solid var(--border);border-radius:10px;background:white;display:flex;align-items:center;justify-content:center;cursor:pointer;font-size:14px;color:var(--text-light);transition:all .2s;margin-left:4px}
.nav-search:hover{border-color:var(--rose);color:var(--rose-deep)}
.mobile-toggle{display:none;background:none;border:none;font-size:24px;cursor:pointer;color:var(--text-dark)}

/* ‚îÄ‚îÄ‚îÄ Inline Nav Search ‚îÄ‚îÄ‚îÄ */
.nav-search-wrap{position:relative;margin-left:6px}
.nav-search-box{display:flex;align-items:center;gap:8px;background:white;border:1.5px solid var(--border);border-radius:50px;padding:6px 14px;transition:all .3s;min-width:200px}
.nav-search-box:focus-within{border-color:var(--rose);box-shadow:0 4px 20px rgba(199,107,143,.12);min-width:280px}
.nav-search-icon{font-size:13px;color:var(--text-light)}
.nav-search-input{border:none;outline:none;font-family:'Plus Jakarta Sans',sans-serif;font-size:13px;background:transparent;width:100%;color:var(--text-dark)}
.nav-search-input::placeholder{color:var(--text-light);font-size:12px}
.nav-search-kbd{font-size:10px;padding:1px 6px;background:var(--cream-dark);border:1px solid var(--border);border-radius:4px;color:var(--text-light);font-family:monospace;display:none}
.nav-search-box:focus-within .nav-search-kbd{display:inline}
.nav-search-results{position:absolute;top:calc(100% + 8px);left:0;right:0;min-width:360px;background:white;border-radius:16px;box-shadow:0 12px 48px rgba(0,0,0,.15);border:1px solid var(--border);display:none;max-height:420px;overflow-y:auto;z-index:200}
.nav-search-results.active{display:block}
.nsr-item{display:flex;gap:12px;padding:12px 16px;align-items:center;cursor:pointer;transition:background .15s;text-decoration:none;color:inherit;border-bottom:1px solid var(--cream-dark)}
.nsr-item:last-child{border-bottom:none}
.nsr-item:hover{background:var(--cream)}
.nsr-tier{font-size:9px;font-weight:700;letter-spacing:1px;padding:2px 8px;border-radius:50px;color:white;flex-shrink:0}
.nsr-title{font-family:'Josefin Sans',sans-serif;font-size:14px;font-weight:600}
.nsr-loc{font-size:11px;color:var(--text-light)}
.nsr-empty{padding:20px;text-align:center;color:var(--text-light);font-size:13px}

/* ‚îÄ‚îÄ‚îÄ Beautiful File Upload ‚îÄ‚îÄ‚îÄ */
input[type="file"]{position:relative;font-family:'Plus Jakarta Sans',sans-serif;font-size:13px;color:var(--text-mid)}
input[type="file"]::file-selector-button{background:linear-gradient(135deg,var(--rose-deep),var(--rose-dark));color:white;border:none;padding:8px 18px;border-radius:50px;font-family:'Plus Jakarta Sans',sans-serif;font-size:12px;font-weight:600;cursor:pointer;margin-right:12px;transition:all .25s;box-shadow:0 2px 8px rgba(199,107,143,.2)}
input[type="file"]::file-selector-button:hover{transform:translateY(-1px);box-shadow:0 4px 16px rgba(199,107,143,.35)}

/* ‚îÄ‚îÄ‚îÄ Mobile Nav ‚îÄ‚îÄ‚îÄ */
.mobile-nav{display:none;position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(253,248,243,.98);z-index:200;padding:80px 32px 32px;flex-direction:column;gap:8px}
.mobile-nav.open{display:flex}
.mobile-nav-close{position:absolute;top:20px;right:24px;background:none;border:none;font-size:28px;cursor:pointer;color:var(--text-dark)}
.mobile-nav a{font-family:'Plus Jakarta Sans',sans-serif;font-size:18px;font-weight:500;color:var(--text-dark);padding:14px 0;border-bottom:1px solid var(--border);display:block}

/* ‚îÄ‚îÄ‚îÄ Common ‚îÄ‚îÄ‚îÄ */
.container{max-width:1300px;margin:0 auto;padding:0 40px}
.section{padding:80px 0}
.section-header{margin-bottom:48px}
.section-tag{font-family:'Plus Jakarta Sans',sans-serif;font-size:12px;font-weight:600;letter-spacing:2px;text-transform:uppercase;color:var(--rose-deep);margin-bottom:8px}
.section-title{font-family:'Josefin Sans',sans-serif;font-size:clamp(28px,3.5vw,42px);color:var(--text-dark)}
.section-desc{color:var(--text-mid);margin-top:8px;font-size:16px;max-width:540px}
.section-header-row{display:flex;justify-content:space-between;align-items:flex-end;flex-wrap:wrap;gap:16px}
.section-link{font-family:'Plus Jakarta Sans',sans-serif;font-size:14px;color:var(--rose-deep);font-weight:500;display:flex;align-items:center;gap:6px}
.section-link:hover{gap:10px}

/* ‚îÄ‚îÄ‚îÄ Buttons ‚îÄ‚îÄ‚îÄ */
.btn{display:inline-flex;align-items:center;gap:8px;padding:14px 32px;border-radius:50px;font-family:'Plus Jakarta Sans',sans-serif;font-size:15px;font-weight:500;border:none;cursor:pointer;transition:all .3s;text-decoration:none}
.btn-primary{background:var(--rose-deep);color:white;box-shadow:0 8px 30px rgba(199,107,143,.25)}
.btn-primary:hover{background:var(--rose-dark);transform:translateY(-2px);box-shadow:0 12px 40px rgba(199,107,143,.35);color:white}
.btn-secondary{background:white;color:var(--text-dark);border:2px solid var(--border)}
.btn-secondary:hover{border-color:var(--rose);color:var(--rose-deep)}
.btn-sm{padding:8px 20px;font-size:13px}

/* ‚îÄ‚îÄ‚îÄ Cards ‚îÄ‚îÄ‚îÄ */
.card{background:white;border-radius:20px;overflow:hidden;transition:all .4s;border:1px solid transparent}
.card:hover{transform:translateY(-6px);box-shadow:0 20px 60px var(--shadow);border-color:var(--rose-pale)}
.card-img{width:100%;aspect-ratio:4/3;position:relative;overflow:hidden;background:var(--cream-dark)}
.card-img img,.card-img-bg{width:100%;height:100%;object-fit:cover;transition:transform .6s}
.card:hover .card-img img,.card:hover .card-img-bg{transform:scale(1.05)}
.card-tag{position:absolute;top:16px;left:16px;background:white;border-radius:50px;padding:6px 14px;font-family:'Plus Jakarta Sans',sans-serif;font-size:11px;font-weight:600;color:var(--rose-deep)}
.card-body{padding:20px 24px}
.card-title{font-family:'Josefin Sans',sans-serif;font-size:20px;margin-bottom:6px}
.card-title a{color:var(--text-dark)}
.card-title a:hover{color:var(--rose-deep)}
.card-loc{font-family:'Plus Jakarta Sans',sans-serif;font-size:13px;color:var(--text-light);display:flex;align-items:center;gap:4px;margin-bottom:12px}
.card-meta{display:flex;gap:14px;font-family:'Plus Jakarta Sans',sans-serif;font-size:12px;color:var(--text-light)}
.card-meta span{display:flex;align-items:center;gap:4px}

/* ‚îÄ‚îÄ‚îÄ Breadcrumb ‚îÄ‚îÄ‚îÄ */
.breadcrumb{font-family:'Plus Jakarta Sans',sans-serif;font-size:13px;color:var(--text-light);padding:16px 0;display:flex;align-items:center;gap:8px;flex-wrap:wrap}
.breadcrumb a{color:var(--text-light)}
.breadcrumb a:hover{color:var(--rose-deep)}

/* ‚îÄ‚îÄ‚îÄ Category Pills ‚îÄ‚îÄ‚îÄ */
.pills{display:flex;gap:10px;flex-wrap:wrap}
.pill{display:inline-flex;align-items:center;gap:8px;padding:10px 20px;background:white;border-radius:50px;white-space:nowrap;border:1px solid var(--border);font-family:'Plus Jakarta Sans',sans-serif;font-size:13px;font-weight:500;color:var(--text-mid);cursor:pointer;transition:all .3s;text-decoration:none}
.pill:hover{border-color:var(--rose);color:var(--rose-deep);box-shadow:0 4px 20px rgba(199,107,143,.1)}
.pill.active{background:var(--rose-deep);color:white;border-color:var(--rose-deep)}
.pill .icon{font-size:16px}

/* ‚îÄ‚îÄ‚îÄ Audio Player ‚îÄ‚îÄ‚îÄ */
.audio-player{background:linear-gradient(135deg,var(--text-dark),#3D2D3E);border-radius:20px;padding:32px;color:white}
.audio-player h3{font-family:'Josefin Sans',sans-serif;font-size:20px;margin-bottom:4px}
.audio-player .artist{font-family:'Plus Jakarta Sans',sans-serif;font-size:13px;opacity:.5;margin-bottom:16px}
.audio-progress{height:4px;background:rgba(255,255,255,.12);border-radius:4px;overflow:hidden;margin-bottom:6px}
.audio-progress-fill{height:100%;background:linear-gradient(90deg,var(--rose),var(--saffron));border-radius:4px}
.audio-times{display:flex;justify-content:space-between;font-family:'Plus Jakarta Sans',sans-serif;font-size:11px;opacity:.4;margin-bottom:16px}
.audio-controls{display:flex;gap:12px;align-items:center}
.audio-ctrl{width:36px;height:36px;border-radius:8px;background:rgba(255,255,255,.06);border:none;color:white;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .2s;font-size:14px}
.audio-ctrl:hover{background:rgba(255,255,255,.15)}
.audio-ctrl.play{width:48px;height:48px;background:var(--rose-deep);border-radius:12px;font-size:18px}

/* ‚îÄ‚îÄ‚îÄ Rich Content ‚îÄ‚îÄ‚îÄ */
.rich-content{font-size:17px;line-height:1.9;color:var(--text-mid)}
.rich-content h2{font-family:'Josefin Sans',sans-serif;font-size:28px;color:var(--text-dark);margin:32px 0 16px}
.rich-content h3{font-family:'Josefin Sans',sans-serif;font-size:22px;color:var(--text-dark);margin:28px 0 12px}
.rich-content p{margin-bottom:16px}
.rich-content img{border-radius:12px;margin:20px 0}
.rich-content blockquote{border-left:4px solid var(--rose);padding:16px 24px;background:var(--rose-pale);border-radius:0 12px 12px 0;margin:20px 0;font-style:italic;color:var(--text-dark)}
.rich-content ul,.rich-content ol{margin:12px 0 16px 24px}
.rich-content li{margin-bottom:6px}

/* ‚îÄ‚îÄ‚îÄ Share Buttons ‚îÄ‚îÄ‚îÄ */
.share-btns{display:flex;gap:8px;margin-top:24px}
.share-btn{width:40px;height:40px;border-radius:10px;background:var(--cream-dark);display:flex;align-items:center;justify-content:center;color:var(--text-mid);font-size:16px;transition:all .2s;border:none;cursor:pointer}
.share-btn:hover{background:var(--rose-pale);color:var(--rose-deep)}

/* ‚îÄ‚îÄ‚îÄ Footer ‚îÄ‚îÄ‚îÄ */
footer{padding:60px 0;background:var(--text-dark);color:rgba(255,255,255,.6)}
.footer-inner{max-width:1300px;margin:0 auto;padding:0 40px;display:grid;grid-template-columns:2fr 1fr 1fr 1fr;gap:48px}
.footer-brand .flogo{font-family:'Josefin Sans',sans-serif;font-size:22px;color:white;margin-bottom:12px}
.footer-brand p{font-size:14px;line-height:1.7;max-width:280px}
.footer-col h4{font-family:'Plus Jakarta Sans',sans-serif;font-size:12px;letter-spacing:2px;text-transform:uppercase;color:var(--rose);margin-bottom:16px}
.footer-col a{display:block;color:rgba(255,255,255,.5);font-family:'Plus Jakarta Sans',sans-serif;font-size:14px;margin-bottom:10px;transition:color .3s}
.footer-col a:hover{color:var(--rose)}
.footer-bottom{max-width:1300px;margin:24px auto 0;padding:24px 40px 0;border-top:1px solid rgba(255,255,255,.08);display:flex;justify-content:space-between;font-family:'Plus Jakarta Sans',sans-serif;font-size:12px}

/* ‚îÄ‚îÄ‚îÄ Pagination ‚îÄ‚îÄ‚îÄ */
.pagination{display:flex;gap:6px;justify-content:center;margin-top:40px}
.pagination a,.pagination span{width:40px;height:40px;border-radius:10px;display:flex;align-items:center;justify-content:center;font-family:'Plus Jakarta Sans',sans-serif;font-size:14px;font-weight:500;border:1px solid var(--border);color:var(--text-mid);transition:all .2s}
.pagination a:hover{border-color:var(--rose);color:var(--rose-deep)}
.pagination .active{background:var(--rose-deep);color:white;border-color:var(--rose-deep)}

/* ‚îÄ‚îÄ‚îÄ Empty State ‚îÄ‚îÄ‚îÄ */
.empty-state{text-align:center;padding:60px 20px;color:var(--text-light)}
.empty-state .icon{font-size:48px;margin-bottom:16px;display:block}
.empty-state h3{font-family:'Josefin Sans',sans-serif;font-size:24px;color:var(--text-dark);margin-bottom:8px}

/* ‚îÄ‚îÄ‚îÄ Responsive ‚îÄ‚îÄ‚îÄ */
@media(max-width:1024px){
.footer-inner{grid-template-columns:repeat(2,1fr)}
}
@media(max-width:768px){
.header-inner{padding:14px 16px}
nav{display:none}
.mobile-toggle{display:block}
.container{padding:0 16px}
.section{padding:60px 0}
.footer-inner{grid-template-columns:1fr;gap:32px;padding:0 16px}
.footer-bottom{flex-direction:column;gap:8px;text-align:center;padding:20px 16px 0}
}

/* ‚îÄ‚îÄ‚îÄ Nuclear Mobile Overflow Prevention ‚îÄ‚îÄ‚îÄ */
html{overflow-x:hidden!important;width:100%!important}
body{overflow-x:hidden!important;width:100%!important;min-width:0!important}
*,*::before,*::after{box-sizing:border-box!important}
img,video,iframe,embed,object{max-width:100%!important;height:auto}
pre,code{overflow-x:auto;max-width:100%;word-break:break-all}

/* ‚îÄ‚îÄ‚îÄ Tier Page Grid ‚Äî must go single-column on mobile ‚îÄ‚îÄ‚îÄ */
@media(max-width:900px){
  .tier-grid{grid-template-columns:1fr!important;gap:24px!important}
}

/* ‚îÄ‚îÄ‚îÄ Comprehensive Mobile ‚îÄ‚îÄ‚îÄ */
@media(max-width:768px){
  /* Every section and container must clip */
  section,section>*,.container,.container>*{max-width:100vw!important;overflow-x:hidden!important}

  /* Hero padding */
  .hero-section{padding:60px 0 36px!important}

  /* Tier grid always stacks */
  .tier-grid{grid-template-columns:1fr!important;gap:20px!important}

  /* Featured image 30% smaller */
  .featured-img-wrap{margin-left:5%!important;margin-right:5%!important;max-width:90%!important}

  /* Quick Info sidebar ‚Äî text must wrap not overflow */
  .quick-info-row{flex-wrap:wrap!important;gap:4px 8px!important}
  .quick-info-row strong{text-align:right!important;word-break:break-word!important;max-width:55%!important}
  .quick-info-row span{flex-shrink:0!important}

  /* Gallery slider */
  .gallery-slider{max-width:100%!important;width:100%!important;border-radius:12px!important}
  .gallery-slider .gs-track{width:100%!important}
  .gallery-slider .gs-slide img{max-width:94%!important;max-height:94%!important}
  .gallery-slider .gs-nav{width:28px!important;height:28px!important;font-size:12px!important}
  .gallery-slider .gs-prev{left:4px!important}
  .gallery-slider .gs-next{right:4px!important}
  .gallery-slider .gs-counter{font-size:10px!important;padding:3px 8px!important;top:8px!important;right:8px!important}

  /* Hierarchy stats bar */
  .hero-stats{gap:8px!important;padding:12px 14px!important;font-size:12px!important}
  .hero-stats div{padding:0!important}

  /* Tier legend badges */
  .tier-legend{gap:6px!important}
  .tier-legend>span{font-size:10px!important;padding:3px 8px!important}

  /* Accordion cards */
  .kp-toggle{padding:14px 12px!important;gap:8px!important}
  .kp-toggle h3{font-size:16px!important}
  .kp-toggle .kp-count{display:none!important}
  .kp-body-inner{padding:0 12px 14px!important}
  .ks-grid{grid-template-columns:1fr!important}

  /* Explore title */
  .explore-title{font-size:22px!important}

  /* Breadcrumb nav */
  .breadcrumb-nav{font-size:11px!important;gap:4px!important}
  .breadcrumb-nav a,.breadcrumb-nav span{max-width:120px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}

  /* Report button */
  .report-btn{font-size:12px!important;padding:10px 18px!important}
  .rm-type-options{flex-direction:column;gap:8px}
  .rm-type-opt{padding:10px 14px}

  /* Section boxes mobile */
  .section-box{padding:18px 16px;margin-bottom:14px;border-radius:14px}
  .sidebar-card-pastel{padding:18px 16px}
  .rich-content{font-size:15.5px!important}
  .rich-content h2{font-size:22px!important}
  .rich-content h3{font-size:19px!important}

  /* Back buttons row wrap */
  .back-btns{flex-wrap:wrap!important;gap:8px!important}
  .back-btns a{font-size:11px!important;padding:6px 10px!important}

  /* Map iframe */
  iframe{max-width:100%!important}

  /* Search results dropdown */
  .nav-search-results{min-width:auto!important;left:0!important;right:0!important;width:calc(100vw - 32px)!important;max-width:100vw!important}

  /* Custom field containers */
  .cf-block{padding:14px!important}

  /* Sidebar cards */
  .sidebar-card{padding:18px!important}

  /* Sub-spot tags wrap */
  .ss-tags{flex-wrap:wrap!important}
}
/* ‚ïê‚ïê‚ïê GALLERY SLIDER ‚Äî Beautiful transitions ‚ïê‚ïê‚ïê */
.featured-img-wrap{max-width:70%;margin-left:auto;margin-right:auto}
.gallery-slider{position:relative;width:100%;max-width:600px;border-radius:16px;overflow:hidden;background:linear-gradient(145deg,#141418,#1e1e24);box-shadow:0 12px 48px rgba(0,0,0,.18),0 4px 16px rgba(0,0,0,.08);margin:0 auto}
.gallery-slider .gs-track{position:relative;width:100%;aspect-ratio:16/10;overflow:hidden}
.gallery-slider .gs-slide{position:absolute;inset:0;opacity:0;display:flex;align-items:center;justify-content:center;transition:opacity .9s cubic-bezier(.4,0,.2,1),transform 1.2s cubic-bezier(.4,0,.2,1);transform:scale(1.04)}
.gallery-slider .gs-slide.active{opacity:1;z-index:2;transform:scale(1)}
.gallery-slider .gs-slide.fade-out{opacity:0;z-index:1;transform:scale(.96)}
.gallery-slider .gs-slide.zoom-out{opacity:0;transform:scale(1.15)}
.gallery-slider .gs-slide.slide-left{opacity:0;transform:translateX(-6%) scale(.98)}
.gallery-slider .gs-slide.slide-right{opacity:0;transform:translateX(6%) scale(.98)}
.gallery-slider .gs-slide img{max-width:88%;max-height:88%;object-fit:contain;border-radius:10px;filter:drop-shadow(0 6px 20px rgba(0,0,0,.4));transition:transform .5s ease}
.gallery-slider:hover .gs-slide.active img{transform:scale(1.01)}
.gallery-slider .gs-nav{position:absolute;top:50%;transform:translateY(-50%);width:38px;height:38px;border-radius:50%;background:rgba(255,255,255,.88);backdrop-filter:blur(10px);border:none;cursor:pointer;display:flex;align-items:center;justify-content:center;z-index:10;box-shadow:0 3px 12px rgba(0,0,0,.2);transition:all .25s;font-size:16px;color:#333;opacity:.7}
.gallery-slider:hover .gs-nav{opacity:1}
.gallery-slider .gs-nav:hover{background:white;transform:translateY(-50%) scale(1.12);box-shadow:0 4px 16px rgba(0,0,0,.25)}
.gallery-slider .gs-prev{left:12px}
.gallery-slider .gs-next{right:12px}
.gallery-slider .gs-dots{display:flex;justify-content:center;gap:7px;padding:14px 0;background:linear-gradient(0deg,rgba(0,0,0,.5) 0%,transparent 100%);position:absolute;bottom:0;left:0;right:0;z-index:10}
.gallery-slider .gs-caption{position:absolute;bottom:36px;left:0;right:0;background:linear-gradient(transparent,rgba(0,0,0,.7));color:white;padding:28px 16px 10px;font-size:13px;font-weight:500;text-align:center;z-index:8;pointer-events:none}
.gallery-slider .gs-dot{width:8px;height:8px;border-radius:50%;background:rgba(255,255,255,.35);cursor:pointer;transition:all .4s cubic-bezier(.4,0,.2,1);border:none}
.gallery-slider .gs-dot.active{background:white;transform:scale(1.4);box-shadow:0 0 8px rgba(255,255,255,.4)}
.gallery-slider .gs-counter{position:absolute;top:12px;right:12px;background:rgba(0,0,0,.55);backdrop-filter:blur(8px);color:white;font-size:11px;padding:5px 12px;border-radius:50px;z-index:10;font-family:'Plus Jakarta Sans',sans-serif;font-weight:600;letter-spacing:.5px}
/* Custom field display with icons */
.cf-grid{display:grid;gap:10px;margin-bottom:24px}
.cf-item{display:flex;align-items:center;gap:12px;padding:14px 18px;background:var(--cream-dark);border-radius:12px;font-family:'Plus Jakarta Sans',sans-serif;transition:all .2s}
.cf-item:hover{background:var(--cream);transform:translateX(2px)}
.cf-item .cf-icon{width:36px;height:36px;border-radius:10px;display:flex;align-items:center;justify-content:center;font-size:18px;flex-shrink:0}
.cf-item .cf-label{font-size:12px;color:var(--text-light);font-weight:600;letter-spacing:.3px}
.cf-item .cf-value{font-size:14px;font-weight:600;color:var(--text-dark)}

/* ‚ïê‚ïê‚ïê Section Boxes ‚Äî mild pastel backgrounds ‚ïê‚ïê‚ïê */
.section-box{border-radius:16px;padding:24px 28px;margin-bottom:20px;border:1px solid transparent;transition:all .3s}
.section-box:hover{transform:translateY(-1px);box-shadow:0 4px 20px rgba(0,0,0,.04)}
.section-box h2,.section-box h3{margin-top:0!important}
.section-box p:last-child{margin-bottom:0}

/* Pastel palette for section boxes */
.section-box.pastel-0{background:#FFF8F0;border-color:#F5E6D3}
.section-box.pastel-1{background:#F0F7FF;border-color:#D6E8FA}
.section-box.pastel-2{background:#F6F0FF;border-color:#E4D5F7}
.section-box.pastel-3{background:#F0FFF5;border-color:#D1F0DC}
.section-box.pastel-4{background:#FFFDF0;border-color:#F5EDCC}
.section-box.pastel-5{background:#FFF0F5;border-color:#F7D5E2}
.section-box.pastel-6{background:#F0FFFF;border-color:#D0EFF0}
.section-box.pastel-7{background:#FFF5EE;border-color:#F0DDD0}
.section-box.pastel-8{background:#F5FFF0;border-color:#DDF0CC}
.section-box.pastel-9{background:#FFF0F0;border-color:#F5D5D5}

/* Sidebar pastel cards */
.sidebar-card-pastel{border-radius:16px;padding:24px;margin-bottom:20px;border:1.5px solid;transition:all .3s}
.sidebar-card-pastel:hover{transform:translateY(-1px);box-shadow:0 4px 16px rgba(0,0,0,.04)}
.sb-pastel-0{background:#FFF8F0;border-color:#F0DCC8!important}
.sb-pastel-1{background:#F0F7FF;border-color:#CADDF5!important}
.sb-pastel-2{background:#F6F0FF;border-color:#DAC8F2!important}
.sb-pastel-3{background:#F0FFF5;border-color:#C5EAD2!important}
.sb-pastel-4{background:#FFFDF0;border-color:#EDE5C0!important}
.sb-pastel-5{background:#FFF0F5;border-color:#F0C8D8!important}

/* Custom field blocks with pastels */
.cf-block-pastel{border-radius:16px;padding:22px 24px;margin-bottom:16px;border:1px solid transparent}

/* ‚ïê‚ïê‚ïê Enhanced Font Sizes (all tiers) ‚ïê‚ïê‚ïê */
.rich-content{font-size:16.5px!important;line-height:1.9!important}
.rich-content h2{font-size:26px!important}
.rich-content h3{font-size:22px!important}
.rich-content p{font-size:16.5px;line-height:1.9}

/* Sidebar font sizes */
.sidebar-card-pastel h3{font-family:'Josefin Sans',sans-serif;font-size:20px!important;font-weight:700;margin-bottom:16px}
.sidebar-card-pastel .quick-info-row{font-size:15px!important}
.sidebar-card-pastel .quick-info-row strong{font-size:15px!important}

/* Custom field font sizes */
.cf-item .cf-label{font-size:13px!important}
.cf-item .cf-value{font-size:15px!important}
.cf-block-pastel h4{font-size:16px!important}
.cf-block-pastel div{font-size:15px}
.report-modal-overlay{position:fixed;inset:0;background:rgba(0,0,0,.6);backdrop-filter:blur(4px);z-index:9999;display:none;align-items:center;justify-content:center;padding:20px}
.report-modal-overlay.active{display:flex}
.report-modal{background:white;border-radius:20px;max-width:520px;width:100%;max-height:90vh;overflow-y:auto;box-shadow:0 24px 80px rgba(0,0,0,.3);animation:rmSlide .4s cubic-bezier(.4,0,.2,1)}
@keyframes rmSlide{from{opacity:0;transform:translateY(40px) scale(.96)}to{opacity:1;transform:translateY(0) scale(1)}}
.report-modal-head{padding:24px 28px 16px;border-bottom:1px solid #f0f0f0;display:flex;align-items:center;justify-content:space-between}
.report-modal-head h3{font-family:'Josefin Sans',sans-serif;font-size:20px;display:flex;align-items:center;gap:10px}
.report-modal-close{width:32px;height:32px;border-radius:50%;border:none;background:var(--cream-deep);cursor:pointer;font-size:16px;display:flex;align-items:center;justify-content:center;transition:all .2s}
.report-modal-close:hover{background:#E53935;color:white}
.report-modal-body{padding:20px 28px 28px}
.rm-tier-info{background:var(--cream);border-radius:12px;padding:12px 16px;margin-bottom:16px;font-family:'Plus Jakarta Sans',sans-serif;font-size:12px;line-height:1.8}
.rm-tier-info strong{color:var(--text-dark);display:block;margin-bottom:4px;font-size:13px}
.rm-field{margin-bottom:14px}
.rm-field label{display:block;font-family:'Plus Jakarta Sans',sans-serif;font-size:13px;font-weight:600;margin-bottom:5px;color:var(--text-dark)}
.rm-field input,.rm-field textarea,.rm-field select{width:100%;padding:10px 14px;border:2px solid var(--cream-deep);border-radius:10px;font-family:'Nunito Sans',sans-serif;font-size:14px;outline:none;transition:border .2s;box-sizing:border-box}
.rm-field input:focus,.rm-field textarea:focus,.rm-field select:focus{border-color:var(--rose)}
.rm-captcha{display:flex;align-items:center;gap:12px;background:var(--cream);border-radius:10px;padding:10px 14px;font-family:'Plus Jakarta Sans',sans-serif}
.rm-captcha-q{font-size:18px;font-weight:800;color:var(--rose-deep);min-width:90px}
.rm-captcha input{width:80px;padding:8px 12px;border:2px solid var(--cream-deep);border-radius:8px;font-size:16px;text-align:center;outline:none}
.rm-captcha input:focus{border-color:var(--rose)}
.rm-submit{width:100%;padding:14px;background:linear-gradient(135deg,var(--rose-deep),var(--rose-dark));color:white;border:none;border-radius:12px;font-family:'Plus Jakarta Sans',sans-serif;font-size:15px;font-weight:700;cursor:pointer;transition:all .3s}
.rm-submit:hover{transform:translateY(-2px);box-shadow:0 8px 24px rgba(199,107,143,.4)}
.rm-success{text-align:center;padding:40px 20px}
.rm-success .check{width:64px;height:64px;background:#4CAF50;border-radius:50%;display:flex;align-items:center;justify-content:center;margin:0 auto 16px;font-size:28px;color:white}
.rm-errors{background:#FFF3F3;border:1px solid #FFCDD2;border-radius:10px;padding:10px 14px;margin-bottom:14px;font-size:13px;color:#C62828}
.rm-type-options{display:flex;gap:12px;margin-top:6px}
.rm-type-opt{flex:1;display:flex;align-items:center;gap:10px;padding:12px 16px;border:2px solid var(--cream-deep);border-radius:12px;cursor:pointer;transition:all .25s;font-family:'Plus Jakarta Sans',sans-serif;font-size:13px;font-weight:600;background:white;user-select:none}
.rm-type-opt:hover{border-color:rgba(199,107,143,.4);background:var(--cream)}
.rm-type-opt.active-error{border-color:#E53935;background:#FFF3F3}
.rm-type-opt.active-feedback{border-color:var(--rose-deep);background:rgba(199,107,143,.06)}
.rm-type-check{width:20px;height:20px;border:2px solid #ccc;border-radius:4px;display:flex;align-items:center;justify-content:center;flex-shrink:0;transition:all .25s;font-size:12px;color:white}
.rm-type-opt.active-error .rm-type-check{background:#E53935;border-color:#E53935}
.rm-type-opt.active-feedback .rm-type-check{background:var(--rose-deep);border-color:var(--rose-deep)}
.rm-type-opt .rm-type-label-error{color:#E53935}
.rm-type-opt .rm-type-label-feedback{color:var(--rose-deep)}
.report-btn{display:inline-flex;align-items:center;gap:8px;background:linear-gradient(135deg,rgba(199,107,143,.08),rgba(231,72,69,.08));border:1.5px solid rgba(199,107,143,.25);color:var(--text-dark);padding:10px 22px;border-radius:50px;font-family:'Plus Jakarta Sans',sans-serif;font-size:12px;font-weight:600;cursor:pointer;transition:all .3s;text-decoration:none}
.report-btn:hover{background:linear-gradient(135deg,rgba(199,107,143,.15),rgba(231,72,69,.15));transform:translateY(-1px);box-shadow:0 4px 16px rgba(199,107,143,.2)}
.report-btn .rb-icon{font-size:15px}
.report-btn .rb-feedback{color:var(--rose-deep)}
.report-btn .rb-sep{color:var(--text-light);font-weight:400}
.report-btn .rb-error{color:#E53935}
</style>
{% block extra_css %}{% endblock %}
</head>
<body>

<!-- Header -->
<header id="header">
<div class="header-inner">
<a class="logo" href="{{ url_for('home') }}"><span class="logo-flower">ü™∑</span><span class="logo-text">Holy<span>Dham</span></span></a>
<nav>
<a href="{{ url_for('home') }}" class="{{ 'active' if request.endpoint == 'home' }}">Home</a>
<a href="{{ url_for('all_dhams') }}" class="{{ 'active' if request.endpoint == 'all_dhams' }}">Holy Dhams</a>
{% for mod in active_modules[:4] %}{% if mod.slug != 'holy-dhams' %}
<a href="{{ url_for('module_page', slug=mod.slug) }}" class="{{ 'active' if request.endpoint == 'module_page' and request.view_args.get('slug') == mod.slug }}">{{ mod.name }}</a>
{% endif %}{% endfor %}
<a href="{{ url_for('contact') }}" class="{{ 'active' if request.endpoint == 'contact' }}">Contact</a>
<a href="{{ url_for('about') }}" class="{{ 'active' if request.endpoint == 'about' }}">About</a>
<!-- Inline Search -->
<div class="nav-search-wrap">
<div class="nav-search-box">
<i class="fas fa-search nav-search-icon"></i>
<input type="text" id="navSearchInput" class="nav-search-input" placeholder="Search dhams, spots, points..." autocomplete="off">
<kbd class="nav-search-kbd">Esc</kbd>
</div>
<div class="nav-search-results" id="navSearchResults"></div>
</div>
</nav>
<button class="mobile-toggle" onclick="document.getElementById('mobileNav').classList.add('open')">‚ò∞</button>
</div>
</header>

<!-- Mobile Nav -->
<div class="mobile-nav" id="mobileNav">
<button class="mobile-nav-close" onclick="this.parentElement.classList.remove('open')">‚úï</button>
<a href="{{ url_for('home') }}">üè† Home</a>
<a href="{{ url_for('all_dhams') }}">üõï Holy Dhams</a>
{% for mod in active_modules %}{% if mod.slug != 'holy-dhams' %}
<a href="{{ url_for('module_page', slug=mod.slug) }}">{{ mod.icon }} {{ mod.name }}</a>
{% endif %}{% endfor %}
<a href="{{ url_for('contact') }}">‚úâÔ∏è Contact</a>
<a href="{{ url_for('about') }}">‚ÑπÔ∏è About Us</a>
</div>

<!-- Main Content -->
<main style="min-height:60vh">
{% with messages = get_flashed_messages(with_categories=true) %}
{% if messages %}
<div style="position:fixed;top:80px;right:20px;z-index:200;display:flex;flex-direction:column;gap:8px">
{% for cat, msg in messages %}
<div style="background:white;border-radius:12px;padding:14px 20px;box-shadow:0 8px 30px rgba(0,0,0,.1);font-family:'Plus Jakarta Sans',sans-serif;font-size:14px;border-left:4px solid {{ 'var(--sage)' if cat=='success' else 'var(--rose-deep)' if cat=='error' else 'var(--saffron)' }};animation:fadeIn .3s ease">
{{ msg }}
</div>
{% endfor %}
</div>
{% endif %}
{% endwith %}

{% block content %}{% endblock %}
</main>

<!-- Footer -->
<footer>
<div class="footer-inner">
<div class="footer-brand">
<div class="flogo">ü™∑ HolyDham</div>
<p>A spiritual knowledge hub curating India's holiest destinations with love and devotion.</p>
</div>
<div class="footer-col">
<h4>Explore</h4>
{% for mod in active_modules[:4] %}
<a href="{{ url_for('module_page', slug=mod.slug) }}">{{ mod.name }}</a>
{% endfor %}
</div>
<div class="footer-col">
<h4>Company</h4>
<a href="{{ url_for('about') }}">About Us</a>
<a href="{{ url_for('contact') }}">Contact</a>
<a href="{{ url_for('privacy') }}">Privacy Policy</a>
<a href="{{ url_for('terms') }}">Terms of Service</a>
</div>
<div class="footer-col">
<h4>Connect</h4>
<a href="{{ url_for('contact') }}">Get In Touch</a>
<a href="{{ url_for('all_dhams') }}">Browse Dhams</a>
</div>
</div>
<div class="footer-bottom">
<span>¬© {{ current_year }} Holy Dham CMS. Made with üôè</span>
<span><a href="{{ url_for('privacy') }}" style="color:inherit">Privacy</a> ¬∑ <a href="{{ url_for('terms') }}" style="color:inherit">Terms</a> ¬∑ <a href="{{ url_for('about') }}" style="color:inherit">About</a></span>
</div>
</footer>

<!-- Smart Scroll Button (single, toggles direction) -->
<button id="scrollBtn" style="position:fixed;right:16px;bottom:20px;z-index:90;width:30px;height:30px;border-radius:50%;background:var(--rose-deep);color:white;border:none;cursor:pointer;font-size:12px;box-shadow:0 3px 12px rgba(199,107,143,.35);transition:all .3s;display:none;align-items:center;justify-content:center" onclick="smartScroll()"><i class="fas fa-chevron-down" id="scrollIcon"></i></button>

<script>
/* ‚ïê‚ïê‚ïê SMART SCROLL BUTTON ‚ïê‚ïê‚ïê */
(function(){
  var btn=document.getElementById('scrollBtn'),icon=document.getElementById('scrollIcon');
  if(!btn)return;
  function update(){
    var st=window.scrollY||window.pageYOffset;
    var docH=document.documentElement.scrollHeight;
    var winH=window.innerHeight;
    var atBottom=(st+winH)>=(docH-80);
    if(st<200){btn.style.display='none';return}
    btn.style.display='flex';
    if(atBottom){
      icon.className='fas fa-chevron-up';
      btn.style.background='var(--text-dark)';
    } else {
      icon.className='fas fa-chevron-down';
      btn.style.background='var(--rose-deep)';
    }
  }
  window.smartScroll=function(){
    var st=window.scrollY||window.pageYOffset;
    var docH=document.documentElement.scrollHeight;
    var winH=window.innerHeight;
    var atBottom=(st+winH)>=(docH-80);
    if(atBottom) window.scrollTo({top:0,behavior:'smooth'});
    else window.scrollTo({top:docH,behavior:'smooth'});
  };
  window.addEventListener('scroll',update);
  update();
})();

window.addEventListener('scroll',()=>{
  document.getElementById('header').classList.toggle('scrolled',window.scrollY>50);
});
setTimeout(()=>{document.querySelectorAll('[style*="fadeIn"]').forEach(el=>el.style.opacity='0')},4000);

/* ‚ïê‚ïê‚ïê INLINE LIVE SEARCH ‚ïê‚ïê‚ïê */
(function(){
  const inp=document.getElementById('navSearchInput'),box=document.getElementById('navSearchResults');
  if(!inp||!box)return;
  let timer;
  const tierColors={T1:'#C76B8F',T2:'#2E86AB',T3:'#E74845',T4:'#9C27B0'};
  inp.addEventListener('input',function(){
    clearTimeout(timer);
    const q=this.value.trim();
    if(q.length<2){box.classList.remove('active');box.innerHTML='';return}
    timer=setTimeout(()=>{
      fetch('/api/v1/live-search?q='+encodeURIComponent(q))
      .then(r=>r.json()).then(data=>{
        if(!data.length){box.innerHTML='<div class="nsr-empty">No results found. Try a different search term.</div>';box.classList.add('active');return}
        box.innerHTML=data.map(r=>`<a class="nsr-item" href="${r.url}"><span class="nsr-tier" style="background:${tierColors[r.tier]||'#888'}">${r.tier}</span><div><div class="nsr-title">${r.title}</div><div class="nsr-loc">${r.tier_label} ¬∑ ${r.location}</div></div></a>`).join('');
        box.classList.add('active');
      });
    },250);
  });
  inp.addEventListener('keydown',e=>{if(e.key==='Escape'){inp.value='';box.classList.remove('active');inp.blur()}});
  document.addEventListener('click',e=>{if(!e.target.closest('.nav-search-wrap'))box.classList.remove('active')});
})();

/* ‚ïê‚ïê‚ïê GALLERY SLIDER ENGINE ‚Äî Multiple Transitions ‚ïê‚ïê‚ïê */
function initSlider(el) {
    const slides = el.querySelectorAll('.gs-slide');
    const dots = el.querySelectorAll('.gs-dot');
    const counter = el.querySelector('.gs-counter');
    const currentSpan = el.querySelector('.gs-current');
    let cur = 0, total = slides.length, timer, transitioning = false;
    const effects = ['fade','zoom-out','slide-left','slide-right','fade'];
    function show(n) {
        if (transitioning || n === cur) return;
        transitioning = true;
        const prev = cur;
        cur = (n % total + total) % total;
        const effect = effects[cur % effects.length];
        slides[prev].classList.remove('active');
        slides[prev].classList.add(effect === 'zoom-out' ? 'zoom-out' : effect === 'slide-left' ? 'slide-left' : effect === 'slide-right' ? 'slide-right' : 'fade-out');
        slides[cur].classList.remove('fade-out','zoom-out','slide-left','slide-right');
        slides[cur].classList.add('active');
        dots.forEach((d, i) => d.classList.toggle('active', i === cur));
        if (currentSpan) currentSpan.textContent = cur + 1;
        else if (counter) counter.textContent = (cur + 1) + ' / ' + total;
        setTimeout(() => {
            slides[prev].classList.remove('fade-out','zoom-out','slide-left','slide-right');
            transitioning = false;
        }, 1000);
    }
    function auto() { timer = setInterval(() => show(cur + 1), 4000); }
    function reset() { clearInterval(timer); auto(); }
    el.querySelector('.gs-prev')?.addEventListener('click', () => { show(cur - 1); reset(); });
    el.querySelector('.gs-next')?.addEventListener('click', () => { show(cur + 1); reset(); });
    dots.forEach((d, i) => d.addEventListener('click', () => { show(i); reset(); }));
    let tx = 0;
    el.addEventListener('touchstart', e => tx = e.touches[0].clientX, {passive: true});
    el.addEventListener('touchend', e => { const dx = e.changedTouches[0].clientX - tx; if (Math.abs(dx) > 50) { show(dx < 0 ? cur + 1 : cur - 1); reset(); } }, {passive: true});
    el.setAttribute('tabindex', '0');
    el.addEventListener('keydown', e => { if (e.key === 'ArrowLeft') { show(cur - 1); reset(); } if (e.key === 'ArrowRight') { show(cur + 1); reset(); } });
    if (total > 1 && el.dataset.auto !== 'false') auto();
}
document.addEventListener('DOMContentLoaded', () => document.querySelectorAll('.gallery-slider').forEach(initSlider));
</script>
{% block extra_js %}{% endblock %}

<!-- Report Error / Feedback Modal -->
<div class="report-modal-overlay" id="reportModal">
<div class="report-modal">
<div class="report-modal-head">
<h3>‚úèÔ∏è Give Feedback / Report Error</h3>
<button class="report-modal-close" onclick="closeReportModal()">‚úï</button>
</div>
<div class="report-modal-body" id="reportModalBody">
<div class="rm-tier-info" id="rmTierInfo"></div>
<div id="rmErrors" class="rm-errors" style="display:none"></div>
<div class="rm-field"><label>Type</label>
<input type="hidden" id="rmType" value="error">
<div class="rm-type-options">
<div class="rm-type-opt active-error" data-value="error" onclick="selectReportType(this,'error')">
<span class="rm-type-check">‚úì</span>
<span class="rm-type-label-error">üî¥ Report Error</span>
</div>
<div class="rm-type-opt" data-value="feedback" onclick="selectReportType(this,'feedback')">
<span class="rm-type-check">‚úì</span>
<span class="rm-type-label-feedback">üí¨ Give Feedback</span>
</div>
</div>
</div>
<div class="rm-field"><label>Your Name *</label><input id="rmName" placeholder="Your name"></div>
<div class="rm-field"><label>Email Address *</label><input id="rmEmail" type="email" placeholder="your@email.com"></div>
<div class="rm-field"><label>Message *</label><textarea id="rmMessage" rows="4" placeholder="Describe the error or share your feedback..."></textarea></div>
<div class="rm-field">
<label>Verify you are human *</label>
<div class="rm-captcha">
<span class="rm-captcha-q" id="rmCaptchaQ"></span>
<span>=</span>
<input id="rmCaptchaA" type="number" placeholder="?">
<input type="hidden" id="rmCaptchaE">
</div>
</div>
<button class="rm-submit" onclick="submitReport()">Submit Report</button>
</div>
</div>
</div>


<script>
// Report Error Modal
function selectReportType(el,val){
  document.querySelectorAll('.rm-type-opt').forEach(function(o){o.classList.remove('active-error','active-feedback')});
  el.classList.add(val==='error'?'active-error':'active-feedback');
  document.getElementById('rmType').value=val;
}
function openReportModal(tierInfo){
  // Decode HTML entities from data attribute
  var tmp = document.createElement('div');
  tmp.innerHTML = tierInfo || '';
  var decoded = tmp.innerHTML;
  document.getElementById('rmTierInfo').innerHTML = decoded;
  document.getElementById('rmErrors').style.display='none';
  document.getElementById('rmErrors').innerHTML='';
  document.getElementById('rmName').value='';
  document.getElementById('rmEmail').value='';
  document.getElementById('rmMessage').value='';
  document.getElementById('rmCaptchaA').value='';
  document.getElementById('rmType').value='error';
  // Reset type selection to error
  document.querySelectorAll('.rm-type-opt').forEach(function(o){o.classList.remove('active-error','active-feedback')});
  document.querySelector('.rm-type-opt[data-value="error"]').classList.add('active-error');
  // Generate captcha
  var a=Math.floor(Math.random()*40)+10, b=Math.floor(Math.random()*20)+5;
  var op=Math.random()>.5?'+':'-';
  if(op==='-'&&b>a){var t=a;a=b;b=t}
  var ans=op==='+'?a+b:a-b;
  document.getElementById('rmCaptchaQ').textContent=a+' '+op+' '+b;
  document.getElementById('rmCaptchaE').value=ans;
  // Reset submit button
  var btn = document.querySelector('.rm-submit');
  if(btn){btn.disabled=false; btn.textContent='Submit Report';}
  // Show modal
  document.getElementById('reportModal').classList.add('active');
}
function closeReportModal(){document.getElementById('reportModal').classList.remove('active')}
function submitReport(){
  var btn=document.querySelector('.rm-submit');
  btn.disabled=true; btn.textContent='Submitting...';
  var fd=new FormData();
  fd.append('report_name',document.getElementById('rmName').value);
  fd.append('report_email',document.getElementById('rmEmail').value);
  fd.append('report_message',document.getElementById('rmMessage').value);
  fd.append('report_type',document.getElementById('rmType').value);
  fd.append('page_url',window.location.href);
  fd.append('tier_info',document.getElementById('rmTierInfo').innerText||'');
  fd.append('captcha_answer',document.getElementById('rmCaptchaA').value);
  fd.append('captcha_expected',document.getElementById('rmCaptchaE').value);
  fetch('/report-error',{method:'POST',body:fd}).then(r=>r.json()).then(data=>{
    if(data.ok){
      document.getElementById('reportModalBody').innerHTML='<div class="rm-success"><div class="check">‚úì</div><h3 style="font-family:Josefin Sans;margin-bottom:8px">Thank You!</h3><p style="color:var(--text-mid);font-size:14px">Your report has been submitted successfully. Our team will review it shortly.</p><button class="rm-submit" style="margin-top:20px;max-width:200px;margin-left:auto;margin-right:auto;display:block" onclick="closeReportModal()">Close</button></div>';
    } else {
      var el=document.getElementById('rmErrors');
      el.innerHTML=(data.errors||['Unknown error']).join('<br>');
      el.style.display='block';
      btn.disabled=false; btn.textContent='Submit Report';
    }
  }).catch(function(){
    btn.disabled=false; btn.textContent='Submit Report';
    alert('Network error. Please try again.');
  });
}
document.getElementById('reportModal').addEventListener('click',function(e){if(e.target===this)closeReportModal()});

// ‚ïê‚ïê‚ïê Section Box Pastel Wrapper ‚ïê‚ïê‚ïê
(function(){
  var pastels=10; // total pastel classes (0-9)
  // Wrap rich-content sections in pastel boxes
  document.querySelectorAll('.rich-content').forEach(function(rc){
    var children=Array.from(rc.childNodes);
    var sections=[];
    var current=null;
    var pi=0;
    children.forEach(function(node){
      if(node.nodeType===1 && /^H[23]$/i.test(node.tagName)){
        if(current)sections.push(current);
        current={heading:node,nodes:[]};
      } else if(current){
        current.nodes.push(node);
      } else {
        // Content before first heading ‚Äî also box it
        if(!sections.length && !current){
          current={heading:null,nodes:[node]};
        } else if(current){
          current.nodes.push(node);
        }
      }
    });
    if(current)sections.push(current);
    if(sections.length>0){
      rc.innerHTML='';
      sections.forEach(function(sec,i){
        var box=document.createElement('div');
        box.className='section-box pastel-'+(i%pastels);
        if(sec.heading)box.appendChild(sec.heading);
        sec.nodes.forEach(function(n){box.appendChild(n)});
        rc.appendChild(box);
      });
    }
  });
  // Apply pastel to sidebar cards
  document.querySelectorAll('.sidebar-card').forEach(function(card,i){
    card.classList.add('sidebar-card-pastel','sb-pastel-'+(i%6));
    card.style.background='';card.style.border='';
  });
  // Apply pastel to custom field blocks  
  document.querySelectorAll('.cf-block').forEach(function(block,i){
    block.classList.add('cf-block-pastel','pastel-'+((i+3)%pastels));
    block.style.background='';
  });
})();
</script>
</body>
</html>
