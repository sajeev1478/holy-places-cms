{# Custom Fields Display - pass custom_vals (query result rows) and accent color #}
{% if custom_vals %}
{% set has_display = [] %}
{% for cv in custom_vals %}{% if cv.value and cv.field_type in ('text','number','url') %}{% if has_display.append(1) %}{% endif %}{% endif %}{% endfor %}
{% if has_display %}
<div class="cf-grid">
{% for cv in custom_vals %}{% if cv.value and cv.field_type in ('text','number') %}
<div class="cf-item">
<div class="cf-icon" style="background:{{ accent or '#666' }}10">{{ cv.field_icon or 'ðŸ“‹' }}</div>
<div style="flex:1"><div class="cf-label">{{ cv.label }}</div><div class="cf-value">{{ cv.value }}</div></div>
</div>
{% elif cv.value and cv.field_type == 'url' %}
<div class="cf-item">
<div class="cf-icon" style="background:{{ accent or '#666' }}10">{{ cv.field_icon or 'ðŸ”—' }}</div>
<div style="flex:1"><div class="cf-label">{{ cv.label }}</div><div class="cf-value"><a href="{{ cv.value }}" target="_blank" style="color:{{ accent or 'var(--rose-deep)' }};text-decoration:none">{{ cv.value[:50] }}{% if cv.value|length > 50 %}â€¦{% endif %}</a></div></div>
</div>
{% endif %}{% endfor %}
</div>
{% endif %}

{% for cv in custom_vals %}{% if cv.value and cv.field_type in ('textarea','richtext') %}
<div class="cf-block" style="background:var(--cream-dark);border-radius:14px;padding:20px;margin-bottom:16px">
<h4 style="font-size:16px;font-weight:700;margin-bottom:10px;font-family:'Plus Jakarta Sans',sans-serif;display:flex;align-items:center;gap:8px"><span style="font-size:16px">{{ cv.field_icon or 'ðŸ“‹' }}</span> {{ cv.label }}</h4>
<div style="line-height:1.8;color:var(--text-mid);font-size:15px">{{ cv.value|safe }}</div>
</div>
{% endif %}{% endfor %}

{% for cv in custom_vals %}{% if cv.value and cv.field_type == 'audio' %}
<div class="cf-block" style="background:var(--cream-dark);border-radius:14px;padding:16px;margin-bottom:16px;display:flex;align-items:center;gap:14px">
<span style="font-size:24px">{{ cv.field_icon or 'ðŸŽµ' }}</span>
<div style="flex:1"><div style="font-size:12px;font-weight:700;color:var(--text-light);margin-bottom:4px">{{ cv.label }}</div>
<audio controls style="width:100%;height:36px"><source src="/static/uploads/{{ cv.value }}"></audio></div>
</div>
{% elif cv.value and cv.field_type == 'video' %}
<div class="cf-block" style="background:var(--cream-dark);border-radius:14px;padding:16px;margin-bottom:16px">
<div style="font-size:12px;font-weight:700;color:var(--text-light);margin-bottom:8px;display:flex;align-items:center;gap:6px"><span>{{ cv.field_icon or 'ðŸŽ¬' }}</span> {{ cv.label }}</div>
<video controls style="width:100%;border-radius:10px;max-height:300px"><source src="/static/uploads/{{ cv.value }}"></video>
</div>
{% endif %}{% endfor %}
{% endif %}
